
\begin{figure}[ht]
  \centering
  \includegraphics[scale=0.25]{images/LED_Steckplatine.png}	
  \includegraphics[scale=0.25]{images/LED_Schaltplan.png}
  %	\caption{}
  \label{LED_Steckplatine}
\end{figure}


\ExerciseBox{
Lasse die LED blinken [Beispiele]\\
Verändere die Helligkeit der LED in dem du ein PWM-Signal erzeugst}


\subsection{Shell}

\begin{console}
	gpio -g mode 16 out
	gpio -g write 16 1
	gpio -g write 16 0
	for i in {1..3}; do gpio -g write 16 1; sleep 1; gpio -g write 16 0; sleep 1; done
	gpio -g mode 16 in
\end{console}

%https://de.scribd.com/doc/101830961/GPIO-Pads-Control2

% gpio drive 0 0  2 mA
% gpio drive 0 3  8 mA <- default
% gpio drive 0 7  16 mA

\clearpage
\subsection{C}

\begin{console}
	geany &
\end{console}

Zuerst wird ein neues Projekt erstellt. Dazu wählt man im Menü \texttt{Projekt} $\rightarrow$ \texttt{Neu...}. Dann gibt man den Namen des Projekts an, z.~B. Blink. Das Anlegen der Verzeichnisse muss danach auch noch bestätigt werden.

\begin{figure}[ht]
	\centering
	\includegraphics[scale=0.48]{images/Geany_Projekt.png}
	\includegraphics[scale=0.42]{images/Geany_Projekt2.png}
	%	\caption{}
	\label{Geany-create}
\end{figure}


Weitere Einstellungen wie Zeichen für Einrückungen und Zeilenumbruch können unter \texttt{Projekt} $\rightarrow$ \texttt{Eigenschaften} vorgenommen werden.\\
Danach wählt man \texttt{Datei} $\rightarrow$ \texttt{Speichern unter} um die unbenannte Datei mit dem Namen "`Blink.c"' speichern zu können. Nun kann man den folgenden C-Source eingeben.

\lstset{language=C, caption=, label=LEDProgram, frame=single, basicstyle=\ttfamily
	\footnotesize, breakatwhitespace=false, showstringspaces=false, showtabs=false, tabsize=2 }
\lstinputlisting{source/Blink.c}

Im Menü muss man nun unter \texttt{Erstellen} $\rightarrow$ \texttt{Kommandos zum Erstellen konfigurieren} die WiringPi Library mit "`\textit{-lwiringPi}"' bei \texttt{Compile} und \texttt{Build} ergänzen.

\begin{figure}[ht]
	\centering
	\includegraphics[scale=0.48]{images/Geany_Create_Wiringpi.png}
	%	\caption{}
	\label{Geany-create}
\end{figure}

Dann kann man das Projekt mit den Ziegel-Icon \includegraphics[scale=0.4]{images/Geany_Icon_Erstellen.png} erstellen bzw. kompilieren und danach mit dem Zahnrad-Icon \includegraphics[scale=0.4]{images/Geany_Icon_Ausfuehren.png} ausführen. Beendet wird das Programm mit der Tastenkombination \framebox{Strg}+\framebox{C}. 


\clearpage
\subsection{C\#}

\begin{console}
	geany &
\end{console}

Zuerst wird ein neues Projekt erstellt. Dazu wählt man im Menü \texttt{Projekt} $\rightarrow$ \texttt{Neu...}. Dann gibt man den Namen des Projekts an, z.~B. csBlink. Das Anlegen der Verzeichnisse muss danach auch noch bestätigt werden. Danach wählt man \texttt{Datei} $\rightarrow$ \texttt{Speichern unter} um die unbenannte Datei mit dem Namen "`\textit{Blink.cs}"' speichern zu können. Nun kann man den folgenden C\#-Source eingeben.\\

\lstset{language=C, caption=, label=LEDProgramCS, frame=single, basicstyle=\ttfamily
	\footnotesize, breakatwhitespace=false, showstringspaces=false, showtabs=false, tabsize=2 }
\lstinputlisting{source/Blink.cs}

Um das Programm kompilieren zu können, muss im Menü unter \texttt{Erstellen}
$\rightarrow$ \texttt{Kommandos zum Erstellen konfigurieren} der Pfad zur Sourcedatei des C\# WiringPi 
Wrapper (siehe \ref{WiringPiCS}) hinzugefügt werden. Hierfür im Textfeld \texttt{Kompilieren} den Pfad zu WiringPi.cs ergänzen 
"`\textit{mcs /t:winexe \textquotedblleft\%f\textquotedblright WiringPi.cs /r:System,System.Drawing}"'.\\


\begin{figure}[ht]
	\centering
	\includegraphics[scale=0.48]{images/Geany_Set_cs.png}
	%	\caption{}
	\label{Geany-setpy3}
\end{figure}

Es muss die WiringPi Wrapper Datei in das Projektverzeichnis kopiert werden. 

\begin{console}
	cp ~/Projekte/WiringPi.cs ~/Projekte/csBlink/
\end{console}

Anschließend kann man das Programm mit dem Kompilieren-Icon \includegraphics[scale=0.4]{images/Geany_Icon_Kompilieren.png} erstellen bzw. kompilieren und mit dem Zahnrad-Icon \includegraphics[scale=0.4]{images/Geany_Icon_Ausfuehren.png} ausführen.
Das Programm kann mit der Tastenkombination \framebox{Strg}+\framebox{C} vorzeitig beendet werden.


\clearpage
\subsection{Python}

\begin{console}
	geany &
\end{console}

Zuerst wird ein neues Projekt erstellt. Dazu wählt man im Menü \texttt{Projekt} $\rightarrow$ \texttt{Neu...}. Dann gibt man den Namen des Projekts an, z.~B. PyBlink. Das Anlegen der Verzeichnisse muss danach auch noch bestätigt werden. Danach wählt man \texttt{Datei} $\rightarrow$ \texttt{Speichern unter} um die unbenannte Datei mit dem Namen "`\textit{Blink.py}"' speichern zu können. Nun kann man den folgenden Python-Source eingeben.

\lstset{language=Python, caption=, 
        label=LEDProgram, frame=single, basicstyle=\ttfamily
	      \footnotesize, breakatwhitespace=false, showstringspaces=false, 
        showtabs=false, tabsize=2 }
\lstinputlisting{source/Blink.py}

Um das Programm auszuführen zu können, muss im Menü unter \texttt{Erstellen}
$\rightarrow$ \texttt{Kommandos zum Erstellen konfigurieren} der Python 
Interpreter von Version 2 auf Version 3 umgestellt werden. Hierfür einfach im
Textfeld \texttt{Compile} und im Textfeld \texttt{Execute} "`\textit{python}"' durch "`\textit{python3}"'
ersetzen.

\begin{figure}[ht]
	\centering
	\includegraphics[scale=0.48]{images/Geany_SetPy3.png}
	%	\caption{}
	\label{Geany-setpy3}
\end{figure}

Anschließend kann man das Programm mit dem Zahnrad-Icon \includegraphics[scale=0.4]{images/Geany_Icon_Ausfuehren.png} ausführen. Achtung, nach dem Start braucht die Initialisierung der GPIOZero Library ein paar Sekunden, bevor das Programm startet. Beendet wird das Programm mit der Tastenkombination \framebox{Strg}+\framebox{C}.

\clearpage
\subsection{Blockly-gPIo}


Nachdem man mit dem Browser die Blockly-gPIo Adresse \url{http://raspberrypi.local/Blockly-gPIo} aufgerufen hat, kann man die Programmierung vornehmen.\\
Den Block "`repeat"' kann man vom Menüeintrag "`Loops"' herausziehen. Die Blöcke "`set LED ..."' und den Ausgangsstatus "`High"' kann man im Menüeintrag "`gPIo"' finden. Die "`wait"' Funktion steckt im Menüeintrag "`time"'. Den Wert für die Wartezeit muss man sich im Menü unter "`Math"' holen.\\
Mit Plus und Minus Symbolen kann die Anzeige vergrößert und verkleinert werden. Zieht man Blöcke auf den Mistkübel werden sie gelöscht. Mit der rechten Maustaste auf einem der Blöcke kommt man zum Kontextmenü und dann Elemente kopieren.

\begin{figure}[ht]
	\centering
	\includegraphics[scale=0.28]{images/Blockly-gPIo_LED.png}
	%	\caption{}
	\label{Blockly-gPIo_LED_blinking}
\end{figure}

Alle Blöcke untereinander angeordnet, ergeben die gewünschte Blinklicht Funktion. Mit der blauen Start-Taste kann das Programm im Simualtionsmodus gestartet werden. Auf der rechten Seite wird der GPIO-Zustand dargestellt. Rechts unten werden Statusmeldungen, fehler und "`print"' Meldungen ausgegeben.\\  

Nach drücken des Zahnrad-Taste, kann die IP-Adresse der Raspberry Pi eingegeben oder ausgewählt werden. Mit dem Hacken wird die Einstellung übernommen. Mit dem Käfer wird auf den Simulationsmodus geschaltet.  

\begin{figure}[ht]
	\subsection{Assembler}
	
	Echte Hardcore-Programmierer können natürlich auch das Beispiel in Assembler schreiben. \texttt{;-)}
	
	\centering
	\includegraphics[scale=0.32]{images/Blockly-gPIo_connection.png}
	%	\caption{}
	\label{Blockly-gPIo_LED_connect}
\end{figure}


\clearpage
\subsection{Assembler}

Echte Hardcore-Programmierer können natürlich auch das Beispiel in Assembler schreiben. \texttt{;-)}

\lstset{language=[x86masm]Assembler, caption=, 
        label=LEDProgram, frame=single, basicstyle=\ttfamily
	      \footnotesize , breakatwhitespace=false, showstringspaces=false, 
        showtabs=false, tabsize=2 }
\lstinputlisting{source/Blink.asm}

Um das Programm zu kompilieren und auszuführen müssen folgende Befehle in die Kommandozeile eingegeben werden:
\begin{console}
as -o Blink.o Blink.asm 
gcc -o Blink Blink.o -lwiringPi
./Blink 
\end{console}




